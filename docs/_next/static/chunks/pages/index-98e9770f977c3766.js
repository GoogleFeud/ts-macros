(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4965:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labelActions=t.unaryActions=t.binaryActions=t.binaryNumberActions=void 0;const n=r(4625),i=r(7914);t.binaryNumberActions={[n.SyntaxKind.MinusToken]:(e,t)=>n.factory.createNumericLiteral(e-t),[n.SyntaxKind.AsteriskToken]:(e,t)=>n.factory.createNumericLiteral(e*t),[n.SyntaxKind.SlashToken]:(e,t)=>n.factory.createNumericLiteral(e/t),[n.SyntaxKind.LessThanToken]:(e,t)=>e<t?n.factory.createTrue():n.factory.createFalse(),[n.SyntaxKind.LessThanEqualsToken]:(e,t)=>e<=t?n.factory.createTrue():n.factory.createFalse(),[n.SyntaxKind.GreaterThanToken]:(e,t)=>e>t?n.factory.createTrue():n.factory.createFalse(),[n.SyntaxKind.GreaterThanEqualsToken]:(e,t)=>e>=t?n.factory.createTrue():n.factory.createFalse(),[n.SyntaxKind.AmpersandToken]:(e,t)=>n.factory.createNumericLiteral(e&t),[n.SyntaxKind.BarToken]:(e,t)=>n.factory.createNumericLiteral(e|t),[n.SyntaxKind.CaretToken]:(e,t)=>n.factory.createNumericLiteral(e^t),[n.SyntaxKind.PercentToken]:(e,t)=>n.factory.createNumericLiteral(e%t)},t.binaryActions={[n.SyntaxKind.PlusToken]:(e,t,r,i)=>"string"===typeof r||"string"===typeof i?n.factory.createStringLiteral(r+i):"number"===typeof r||"number"===typeof i?n.factory.createNumericLiteral(r+i):void 0,[n.SyntaxKind.EqualsEqualsEqualsToken]:(e,t,r,i)=>r===i?n.factory.createTrue():n.factory.createFalse(),[n.SyntaxKind.EqualsEqualsToken]:(e,t,r,i)=>r==i?n.factory.createTrue():n.factory.createFalse(),[n.SyntaxKind.ExclamationEqualsEqualsToken]:(e,t,r,i)=>r!==i?n.factory.createTrue():n.factory.createFalse(),[n.SyntaxKind.ExclamationEqualsToken]:(e,t,r,i)=>r!=i?n.factory.createTrue():n.factory.createFalse(),[n.SyntaxKind.AmpersandAmpersandToken]:(e,t,r,n)=>r&&n?t:r?n?void 0:t:e,[n.SyntaxKind.BarBarToken]:(e,t,r,n)=>r?e:t},t.unaryActions={[n.SyntaxKind.ExclamationToken]:e=>e?n.factory.createFalse():n.factory.createTrue(),[n.SyntaxKind.MinusToken]:e=>{if("number"===typeof e)return n.factory.createNumericLiteral(-e)},[n.SyntaxKind.TildeToken]:e=>{if("number"===typeof e)return n.factory.createNumericLiteral(~e)},[n.SyntaxKind.PlusToken]:e=>{if("number"===typeof e||"string"===typeof e)return n.factory.createNumericLiteral(+e)}},t.labelActions={[n.SyntaxKind.IfStatement]:e=>(0,i.createObject)({kind:n.factory.createNumericLiteral(0),condition:e.expression,then:e.thenStatement,else:e.elseStatement}),[n.SyntaxKind.ForOfStatement]:e=>{let t;if(n.isVariableDeclarationList(e.initializer)){const r=e.initializer.declarations[0];r&&n.isIdentifier(r.name)&&(t=r.name)}else t=e.initializer;return(0,i.createObject)({kind:n.factory.createNumericLiteral(1),type:n.factory.createStringLiteral("of"),initializer:t,iterator:e.expression,statement:e.statement})},[n.SyntaxKind.ForInStatement]:e=>{let t;if(n.isVariableDeclarationList(e.initializer)){const r=e.initializer.declarations[0];r&&n.isIdentifier(r.name)&&(t=r.name)}else t=e.initializer;return(0,i.createObject)({kind:n.factory.createNumericLiteral(1),type:n.factory.createStringLiteral("in"),initializer:t,iterator:e.expression,statement:e.statement})},[n.SyntaxKind.WhileStatement]:e=>(0,i.createObject)({kind:n.factory.createNumericLiteral(3),do:n.factory.createFalse(),condition:e.expression,statement:e.statement}),[n.SyntaxKind.DoStatement]:e=>(0,i.createObject)({kind:n.factory.createNumericLiteral(3),do:n.factory.createTrue(),condition:e.expression,statement:e.statement}),[n.SyntaxKind.ForStatement]:e=>{let t,r;if(e.initializer)if(n.isVariableDeclarationList(e.initializer)){t=[];for(const r of e.initializer.declarations)n.isIdentifier(r.name)&&t.push(n.factory.createArrayLiteralExpression([n.factory.createIdentifier(r.name.text),r.initializer||n.factory.createIdentifier("undefined")]))}else r=e.initializer;return(0,i.createObject)({kind:n.factory.createNumericLiteral(2),initializer:(0,i.createObject)({variables:t&&n.factory.createArrayLiteralExpression(t),expression:r}),condition:e.condition,increment:e.incrementor,statement:e.statement})},[n.SyntaxKind.Block]:e=>(0,i.createObject)({kind:n.factory.createNumericLiteral(4),statement:e}),[n.SyntaxKind.VariableStatement]:e=>{const t=[],r=[];for(const i of e.declarationList.declarations)n.isIdentifier(i.name)&&(t.push(i.name),r.push(i.initializer||n.factory.createIdentifier("undefined")));return(0,i.createObject)({kind:n.factory.createNumericLiteral(5),identifiers:n.factory.createArrayLiteralExpression(t),initializers:n.factory.createArrayLiteralExpression(r),declarationType:(0,i.hasBit)(e.declarationList.flags,n.NodeFlags.Const)?n.factory.createStringLiteral("const"):(0,i.hasBit)(e.declarationList.flags,n.NodeFlags.Let)?n.factory.createStringLiteral("let"):n.factory.createStringLiteral("var")})}}},3349:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MacroError=t.macros=void 0;const n=r(249);t.macros=new Map,t.default=(e,r)=>i=>{const a=e.getTypeChecker(),o=new n.MacroTransformer(i,a,t.macros,r);return e=>o.run(e)};var i=r(7914);Object.defineProperty(t,"MacroError",{enumerable:!0,get:function(){return i.MacroError}})},5780:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4625),i=r(9939),a=r(175),o=r(7914),s={},c={};t.default={$$loadEnv:{call:(e,t,i)=>{const s=e.length&&n.isStringLiteral(e[0])?e[0].text:"";let c;try{c=r(Object(function(){var e=new Error("Cannot find module 'dotenv'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(l){throw new o.MacroError(i,"`loadEnv` macro called but `dotenv` module is not installed.")}return s?c.config({path:a.join(n.sys.getCurrentDirectory(),s)}):c.config(),t.props.optimizeEnv=!0,t.context.factory.createCallExpression(t.context.factory.createPropertyAccessExpression(t.context.factory.createCallExpression(t.context.factory.createIdentifier("require"),void 0,[t.context.factory.createStringLiteral("dotenv")]),t.context.factory.createIdentifier("config")),void 0,s?[t.context.factory.createObjectLiteralExpression([t.context.factory.createPropertyAssignment(t.context.factory.createIdentifier("path"),t.context.factory.createStringLiteral(s))])]:[])}},$$readFile:{call:([e,t],r,a)=>{const l=e&&r.getStringFromNode(e,!1,!0);if(!l)throw new o.MacroError(a,"`readFile` macro expects a path to the JSON file as the first parameter.");const p=t&&r.getBoolFromNode(t);if(p){if(s[l])return s[l]}else if(c[l])return n.factory.createStringLiteral(c[l]);const u=i.readFileSync(l,"utf-8");if(p){const e=(0,o.primitiveToNode)(JSON.parse(u));return s[l]=e,e}return c[l]=u,n.factory.createStringLiteral(u)}},$$inline:{call:([e,t,r],i,a)=>{if(!e)throw new o.MacroError(a,"`inline` macro expects a function as the first argument.");if(!t||!n.isArrayLiteralExpression(t))throw new o.MacroError(a,"`inline` macro expects an array of expressions as the second argument.");const s=(0,o.normalizeFunctionNode)(i.checker,e);if(!s||!s.body)throw new o.MacroError(a,"`inline` macro expects a function as the first argument.");let c;if(s.parameters.length){const e=new Map;for(let i=0;i<s.parameters.length;i++){const r=s.parameters[i];n.isIdentifier(r.name)&&e.set(r.name.text,t.elements[i])}const r=t=>n.isIdentifier(t)&&e.has(t.text)?e.get(t.text):n.visitEachChild(t,r,i.context);i.context.suspendLexicalEnvironment(),c=n.visitFunctionBody(s.body,r,i.context)}else c=s.body;return r?n.factory.createArrowFunction(void 0,void 0,[],void 0,void 0,c):n.isBlock(c)?c.statements:c}},$$kindof:{call:(e,t,r)=>{if(!e.length)throw new o.MacroError(r,"`kindof` macro expects a single argument.");return t.context.factory.createNumericLiteral(e[0].kind)}},$$define:{call:([e,t,r,i],a,s)=>{const c=a.getStringFromNode(e,!0,!0);if(!c)throw new o.MacroError(s,"`define` macro expects a string literal as the first argument.");const l=a.context.factory.createVariableDeclarationList([a.context.factory.createVariableDeclaration(c,void 0,void 0,t)],a.getBoolFromNode(r)?n.NodeFlags.Let:n.NodeFlags.Const);return n.isForStatement(s.parent)?l:n.factory.createVariableStatement(a.getBoolFromNode(i)?[n.factory.createToken(n.SyntaxKind.ExportKeyword)]:void 0,l)}},$$i:{call:(e,t)=>t.repeat.length?t.context.factory.createNumericLiteral(t.repeat[t.repeat.length-1].index):t.context.factory.createNumericLiteral(-1)},$$length:{call:([e],t,r)=>{if(!e)throw new o.MacroError(r,"`length` macro expects an array / string literal as the first argument.");if(n.isArrayLiteralExpression(e))return t.context.factory.createNumericLiteral(e.elements.length);const i=t.getStringFromNode(e,!0,!0);if(i)return t.context.factory.createNumericLiteral(i.length);throw new o.MacroError(r,"`length` macro expects an array / string literal as the first argument.")}},$$ident:{call:([e],t,r)=>{var i,a;if(!e)throw new o.MacroError(r,"`ident` macro expects a string literal as the first parameter.");const s=t.getStringFromNode(e,!0,!0);return s?(null===(a=null===(i=t.getLastMacro())||void 0===i?void 0:i.defined)||void 0===a?void 0:a.get(s))||n.factory.createIdentifier(s):e}},$$err:{call:([e],t,r)=>{const n=t.getStringFromNode(e,!1,!0);if(!n)throw new o.MacroError(r,"`err` macro expects a string literal as the first argument.");const i=t.macroStack.pop();throw new o.MacroError(r,`${i?`In macro ${i.macro.name}: `:""}${n}`)}},$$includes:{call:([e,t],r,i)=>{if(!e)throw new o.MacroError(i,"`includes` macro expects an array/string literal as the first argument.");if(!t)throw new o.MacroError(i,"`includes` macro expects a second argument.");const a=r.getStringFromNode(e,!1,!0);if(a){const e=r.getLiteralFromNode(t);if("string"!==typeof e)throw new o.MacroError(i,"`includes` macro expects a string literal as the second argument.");return a.includes(e)?n.factory.createTrue():n.factory.createFalse()}if(n.isArrayLiteralExpression(e)){return e.elements.map((e=>r.getLiteralFromNode(r.expectExpression(e)))).includes(r.getLiteralFromNode(t))?n.factory.createTrue():n.factory.createFalse()}throw new o.MacroError(i,"`includes` macro expects an array/string literal as the first argument.")}},$$ts:{call:([e],t,r)=>{const i=t.getStringFromNode(t.expectExpression(e),!0,!0);if(!i)throw new o.MacroError(r,"`ts` macro expects a string as it's first argument.");const a=n.createSourceFile("expr",i,n.ScriptTarget.ESNext,!1,n.ScriptKind.JS),s=e=>n.factory.cloneNode(n.visitEachChild(e,s,t.context));return n.visitNodes(a.statements,s)}},$$escape:{call:([e],t,r)=>{if(!e)throw new o.MacroError(r,"`escape` macro expects a function as it's first argument.");const i=(0,o.normalizeFunctionNode)(t.checker,t.expectExpression(e));if(!i||!i.body)throw new o.MacroError(r,"`escape` macro expects a function as it's first argument.");if(!n.isBlock(i.body))return i.body;{const e=[...t.makeHygienic(i.body.statements)],r=e.pop();if(t.escapeStatement(...e),r){if(n.isReturnStatement(r))return r.expression;if(!e.length&&n.isExpression(r))return r;t.escapeStatement(r)}}}},$$slice:{call:([e,t,r],i,a)=>{if(!e)throw new o.MacroError(a,"`slice` macro expects an array/string literal as the first argument.");const s=t&&i.getNumberFromNode(t)||-1/0,c=r&&i.getNumberFromNode(r)||1/0,l=i.getStringFromNode(e,!1,!0);if(l)return n.factory.createStringLiteral(l.slice(s,c));if(n.isArrayLiteralExpression(e))return n.factory.createArrayLiteralExpression(e.elements.slice(s,c));throw new o.MacroError(a,"`slice` macro expects an array/string literal as the first argument.")}},$$propsOfType:{call:(e,t,r)=>{const i=t.resolveTypeArgumentOfCall(r,0);if(!i)throw new o.MacroError(r,"`propsOfType` macro expects one type parameter.");return n.factory.createArrayLiteralExpression(i.getProperties().map((e=>n.factory.createStringLiteral(e.name))))}},$$typeToString:{call:([e,t,r],i,a)=>{let s=i.resolveTypeArgumentOfCall(a,0);if(!s)throw new o.MacroError(a,"`typeToString` macro expects one type parameter.");return i.getBoolFromNode(e)&&(s=i.checker.getApparentType(s)),i.getBoolFromNode(t)&&(s=i.checker.getNonNullableType(s)),n.factory.createStringLiteral(i.checker.typeToString(s,void 0,i.getBoolFromNode(r)?n.TypeFormatFlags.NoTruncation:void 0))}},$$typeAssignableTo:{call:(e,t,r)=>{const i=t.resolveTypeArgumentOfCall(r,0),a=t.resolveTypeArgumentOfCall(r,1);if(!i||!a)throw new o.MacroError(r,"`typeAssignableTo` macro expects two type parameters.");return t.checker.isTypeAssignableTo(i,a)?n.factory.createTrue():n.factory.createFalse()}},$$text:{call:([e],t,r)=>{if(!e)throw new o.MacroError(r,"`text` macro expects an expression.");return(0,o.expressionToStringLiteral)(e)}},$$decompose:{call:([e],t)=>{if(!e)return n.factory.createArrayLiteralExpression([]);const r=[];return n.visitEachChild(e,(e=>(n.isExpression(e)&&r.push(e),e)),t.context),n.factory.createArrayLiteralExpression(r)}},$$map:{call:([e,t],r,i)=>{const a=r.getLastMacro();if(!a)throw new o.MacroError(i,"`$$map` macro can only be used inside other macros.");if(!e)throw new o.MacroError(i,"`$$map` macro expects an expression as it's first argument.");if(!t)throw new o.MacroError(i,"`$$map` macro expects a function expression as it's second argument.");const s=(0,o.normalizeFunctionNode)(r.checker,t);if(!s||!s.body)throw new o.MacroError(i,"`$$map` macro expects a function as it's second argument.");if(!s.parameters.length||!n.isIdentifier(s.parameters[0].name))throw new o.MacroError(i,"`$$map` macro expects the function to have a parameter.");const c=s.parameters[0].name.text,l=s.parameters[1]&&n.isIdentifier(s.parameters[1].name)&&s.parameters[1].name.text,p=e=>{const t=n.visitNode(e,r.boundVisitor);if(!t)return e;if(!n.isExpression(t))return n.visitEachChild(t,p,r.context);a.store.set(c,t),l&&a.store.set(l,n.factory.createNumericLiteral(t.kind));const i=r.transformFunction(s,!0);return 1===i.length&&i[0].kind===n.SyntaxKind.NullKeyword?n.visitEachChild(t,p,r.context):i};return n.visitNode(e,p)},preserveParams:!0},$$comptime:{call:([e],t,r)=>{if(t.config.noComptime)return;if(t.macroStack.length)throw new o.MacroError(r,"`comptime` macro cannot be called inside macros.");if(!e)throw new o.MacroError(r,"`comptime` macro expects a function as the first parameter.");const i=(0,o.normalizeFunctionNode)(t.checker,e);if(!i||!i.body)throw new o.MacroError(r,"`comptime` macro expects a function as the first parameter.");let a=r.parent;if(n.isExpressionStatement(a)&&(a=a.parent,n.isBlock(a)&&(a=a.parent),"body"in a)){const e=t.checker.getSignatureFromDeclaration(a);if(!e||!e.declaration)return;t.addComptimeSignature(e.declaration,(0,o.fnBodyToString)(t.checker,i),e.parameters.map((e=>e.name)))}else;},preserveParams:!0},$$raw:{call:([e],t,i)=>{if(t.config.noComptime)return;const a=t.getLastMacro();if(!a)throw new o.MacroError(i,"`raw` macro must be called inside another macro.");if(!e)throw new o.MacroError(i,"`raw` macro expects a function as the first parameter.");const s=(0,o.normalizeFunctionNode)(t.checker,e);if(!s||!s.body)throw new o.MacroError(i,"`raw` macro expects a function as the first parameter.");const c=[];for(const r of s.parameters.slice(1)){if(!n.isIdentifier(r.name))throw new o.MacroError(i,"`raw` macro parameters cannot be deconstructors.");c.push(r.name.text)}const l=t.addComptimeSignature(s,(0,o.fnBodyToString)(t.checker,s),["ctx",...c]);return(0,o.tryRun)(e,l,[{ts:n,factory:n.factory,transformer:t,checker:t.checker,thisMacro:a,require:r(1819),error:(e,t)=>{throw new o.MacroError(e,t)}},...(0,o.macroParamsToArray)(a.macro.params,[...a.args])],`$$raw in ${a.macro.name}: `)},preserveParams:!0}}},249:function(e,t,r){"use strict";var n=r(4250);Object.defineProperty(t,"__esModule",{value:!0}),t.MacroTransformer=t.NO_LIT_FOUND=void 0;const i=r(4625),a=r(5780),o=r(7914),s=r(4965);t.NO_LIT_FOUND=Symbol("NO_LIT_FOUND");t.MacroTransformer=class{constructor(e,t,r,n){this.context=e,this.boundVisitor=this.visitor.bind(this),this.repeat=[],this.macroStack=[],this.escapedStatements=[],this.props={},this.checker=t,this.macros=r,this.comptimeSignatures=new Map,this.config=n||{}}run(e){if(e.isDeclarationFile)return e;const t=[];this.addEscapeScope();for(const r of e.statements){if(i.isImportDeclaration(r)&&r.importClause&&!r.importClause.isTypeOnly){if(r.importClause.namedBindings&&i.isNamedImports(r.importClause.namedBindings)){const e=r.importClause.namedBindings.elements.filter((e=>{if(e.isTypeOnly)return this.config.keepImports;const t=(0,o.resolveAliasedSymbol)(this.checker,this.checker.getSymbolAtLocation(e.name));return!t||!this.macros.has(t)&&!a.default[t.name]&&(!((0,o.hasBit)(t.flags,i.SymbolFlags.Interface)&&!(0,o.hasBit)(t.flags,i.SymbolFlags.Class)||(0,o.hasBit)(t.flags,i.SymbolFlags.ConstEnum)||(0,o.hasBit)(t.flags,i.SymbolFlags.TypeAlias))||this.config.keepImports)}));e.length&&t.push(i.factory.updateImportDeclaration(r,r.modifiers,i.factory.createImportClause(r.importClause.isTypeOnly,void 0,i.factory.createNamedImports(e)),r.moduleSpecifier,r.assertClause));continue}if(!r.importClause.namedBindings&&r.importClause.name){const e=(0,o.resolveAliasedSymbol)(this.checker,this.checker.getSymbolAtLocation(r.importClause.name));e&&this.macros.has(e)||t.push(r);continue}}const e=this.visitor(r);this.saveAndClearEscapedStatements(t),e&&(Array.isArray(e)?t.push(...e):t.push(e))}return this.removeEscapeScope(),i.factory.updateSourceFile(e,t)}expectExpression(e){const t=i.visitNode(e,this.boundVisitor);if(!t||!i.isExpression(e))throw new o.MacroError(e,"Expected an expression.");return t}expectStatement(e){const t=i.visitNode(e,this.boundVisitor);if(!t||!(0,o.isStatement)(t))throw new o.MacroError(e,"Expected a statement.");return t}maybeStatement(e){if(!e)return;const t=i.visitNode(e,this.boundVisitor);if(t){if(!(0,o.isStatement)(t))throw new o.MacroError(e,"Expected a statement.");return t}}expect(e,t){const r=i.visitNode(e,this.boundVisitor);if(!r||r.kind!==t)throw new o.MacroError(e,`Expected SyntaxKind ${t}.`);return r}visitor(e){var r,a,c,l,p,u;if(!i.isFunctionDeclaration(e)||!e.name||(null===(r=e.modifiers)||void 0===r?void 0:r.some((e=>e.kind===i.SyntaxKind.DeclareKeyword)))||!e.name.getText().startsWith("$")){if(i.isModuleDeclaration(e)&&e.body){const t=i.visitNode(e.body,this.boundVisitor);return t.statements.length?i.factory.updateModuleDeclaration(e,e.modifiers,e.name,t):void 0}if(i.isBlock(e)){const t=[];this.addEscapeScope();for(const r of e.statements){const e=this.visitor(r);this.saveAndClearEscapedStatements(t),e&&(Array.isArray(e)?t.push(...e):t.push(e))}return this.removeEscapeScope(),i.factory.updateBlock(e,t)}if(i.isLabeledStatement(e)){const t=this.findMacroByName(e.label,e.label.text);if(!t||!t.body)return;let r=e.statement;const n=[];if(i.isLabeledStatement(r)){const t=this.visitor(e.statement);if(!t)return e;if(Array.isArray(t)){const i=t.findIndex((e=>s.labelActions[e.kind]));if(-1===i)return e;n.push(...t.filter(((e,t)=>t!==i))),r=t[i]}else r=this.expectStatement(e.statement)}const a=s.labelActions[r.kind];if(!a)return e;this.macroStack.push({macro:t,call:void 0,args:i.factory.createNodeArray([a(r)]),defined:new Map,store:new Map}),n.push(...i.visitEachChild(t.body,this.boundVisitor,this.context).statements);const o=t.params.find((e=>1===e.marker));return o&&(o.defaultVal=i.factory.createNumericLiteral(+o.defaultVal.text+1)),this.macroStack.pop(),n}if(i.isExpressionStatement(e)){if(i.isCallExpression(e.expression)&&i.isNonNullExpression(e.expression.expression)){const t=this.runMacroFromCallExpression(e.expression,e.expression.expression.expression);return t?this.expandMacroResults(t,e.parent):e}if(i.isTaggedTemplateExpression(e.expression)&&i.isNonNullExpression(e.expression.tag)){const t=this.runMacroFromTemplateExpression(e.expression,e.expression.tag.expression);return t?this.expandMacroResults(t,e.parent):e}}if(i.canHaveDecorators(e)&&(null===(c=i.getDecorators(e))||void 0===c?void 0:c.length)){const t=i.getDecorators(e);let r;const n=[];for(let e=t.length-1;e>=0;e--){const a=t[e];if(i.isCallExpression(a.expression)&&i.isNonNullExpression(a.expression.expression)){const e=this.runMacroFromCallExpression(a.expression,a.expression.expression.expression,r||a.parent);if(e&&e.length){const[t,a]=(0,o.deExpandMacroResults)(e);a&&(r=i.visitNode(a,this.boundVisitor)),n.push(...t)}}}if(r)return[...n,r]}if(i.isCallExpression(e)){if(i.isNonNullExpression(e.expression)){const t=this.runMacroFromCallExpression(e,e.expression.expression);return t?t.length?this.expandMacroResults(t):i.factory.createNull():e}this.callComptimeFunction(e)}if(i.isTaggedTemplateExpression(e)&&i.isNonNullExpression(e.tag)){const t=this.runMacroFromTemplateExpression(e,e.tag.expression);return t&&t.length?this.expandMacroResults(t):i.factory.createNull()}if(i.isNewExpression(e)&&this.callComptimeFunction(e),this.macroStack.length){const{macro:r,args:a,store:c}=this.getLastMacro();if(i.isPropertyAccessExpression(e)||i.isElementAccessExpression(e)){if(i.isPropertyAccessExpression(e)&&this.props.optimizeEnv&&"process.env"===e.expression.getText()){const t=n.env[e.name.text];return t?i.factory.createStringLiteral(t):e}{let t=this.expectExpression(e.expression);for(;i.isParenthesizedExpression(t);)t=t.expression;if(i.isObjectLiteralExpression(t)){const r=i.isPropertyAccessExpression(e)?(0,o.getNameFromProperty)(e.name):this.getNumberFromNode(this.expectExpression(e.argumentExpression));if(!r)return e;const n=t.properties.find((e=>e.name&&(0,o.getNameFromProperty)(e.name)===r));return n&&i.isPropertyAssignment(n)?n.initializer:i.factory.createPropertyAccessExpression(t,r.toString())}if(i.isArrayLiteralExpression(t)){if(!i.isElementAccessExpression(e))return i.factory.createPropertyAccessExpression(t,e.name);const r=this.expectExpression(e.argumentExpression),n=this.getNumberFromNode(r);return void 0!==n&&t.elements[n]?t.elements[n]:i.factory.createElementAccessExpression(t,r)}}}else{if(i.isAsExpression(e))return i.visitNode(e.expression,this.boundVisitor);if(i.isNonNullExpression(e))return i.visitNode(e.expression,this.boundVisitor);if(i.isNumericLiteral(e))return i.factory.createNumericLiteral(e.text);if(i.isStringLiteral(e))return i.factory.createStringLiteral(e.text);if(i.isRegularExpressionLiteral(e))return i.factory.createRegularExpressionLiteral(e.text);if(i.isTemplateHead(e))return i.factory.createTemplateHead(e.text,e.rawText,e.templateFlags);if(i.isTemplateMiddle(e))return i.factory.createTemplateMiddle(e.text,e.rawText,e.templateFlags);if(i.isTemplateTail(e))return i.factory.createTemplateTail(e.text,e.rawText,e.templateFlags);if(i.isIdentifier(e)){if(c.has(e.text)){const t=c.get(e.text);return i.isStringLiteral(t)&&(i.isDeclaration(e.parent)||i.isPropertyAccessExpression(e.parent))?i.factory.createIdentifier(e.text):t}const t=this.getMacroParam(e.text,r,a);return t?i.isIdentifier(t)?t:i.visitNode(t,this.boundVisitor):e}if(i.isVariableStatement(e)){const t=[];for(const r of e.declarationList.declarations)i.isIdentifier(r.name)&&r.name.text.startsWith("$")?c.set(r.name.text,r.initializer?this.expectExpression(r.initializer):i.factory.createIdentifier("undefined")):t.push(this.expect(r,i.SyntaxKind.VariableDeclaration));return t.length?i.factory.createVariableStatement(e.modifiers,i.factory.createVariableDeclarationList(t,e.declarationList.flags)):void 0}if(i.isArrayLiteralExpression(e)&&e.elements.some((e=>i.isSpreadElement(e)))){const t=[];for(const r of e.elements)if(i.isSpreadElement(r)){const e=this.expectExpression(r.expression);i.isArrayLiteralExpression(e)?t.push(...e.elements):t.push(this.expectExpression(r))}else t.push(this.expectExpression(r));return i.factory.createArrayLiteralExpression(t)}if(i.isConditionalExpression(e)){const t=this.expectExpression(e.condition),r=this.getBoolFromNode(t);return!1===r?i.visitNode(e.whenFalse,this.boundVisitor):!0===r?i.visitNode(e.whenTrue,this.boundVisitor):i.factory.createConditionalExpression(t,void 0,this.expectExpression(e.whenTrue),void 0,this.expectExpression(e.whenFalse))}if(i.isIfStatement(e)&&!i.isParenthesizedExpression(e.expression)){const t=this.expectExpression(e.expression),r=this.getBoolFromNode(t);if(!0===r){const t=this.expectStatement(e.thenStatement);return t&&i.isBlock(t)?[...t.statements]:t}if(!1===r){if(!e.elseStatement)return;const t=i.visitNode(e.elseStatement,this.boundVisitor);return t&&i.isBlock(t)?[...t.statements]:t}return i.factory.createIfStatement(t,this.expectStatement(e.thenStatement),e.elseStatement?this.expectStatement(e.elseStatement):void 0)}if(i.isBinaryExpression(e)){const r=e.operatorToken.kind,n=this.expectExpression(e.left),a=this.expectExpression(e.right),o=this.getLiteralFromNode(n),c=this.getLiteralFromNode(a);return o===t.NO_LIT_FOUND||c===t.NO_LIT_FOUND?i.factory.createBinaryExpression(n,r,a):s.binaryNumberActions[r]&&"number"===typeof o&&"number"===typeof c?s.binaryNumberActions[r](o,c):null!==(p=null===(l=s.binaryActions[r])||void 0===l?void 0:l.call(s.binaryActions,n,a,o,c))&&void 0!==p?p:i.factory.createBinaryExpression(n,r,a)}if(i.isTypeOfExpression(e)){const r=this.expectExpression(e.expression),n=this.getLiteralFromNode(r);return n===t.NO_LIT_FOUND?i.factory.updateTypeOfExpression(e,r):i.factory.createStringLiteral(typeof n)}if(i.isExpressionStatement(e)&&i.isPrefixUnaryExpression(e.expression)&&e.expression.operator===i.SyntaxKind.PlusToken&&i.isArrayLiteralExpression(e.expression.operand)){const{separator:t,function:r,literals:n}=(0,o.getRepetitionParams)(e.expression.operand);return this.execRepetition(r,n,t)}if(i.isPrefixUnaryExpression(e)){if(e.operator===i.SyntaxKind.PlusToken&&i.isArrayLiteralExpression(e.operand)){const{separator:t,function:r,literals:n}=(0,o.getRepetitionParams)(e.operand);if(!t)throw new o.MacroError(e,"Repetition separator must be included if a repetition is used as an expression.");return this.execRepetition(r,n,t,!0)}{const r=e.operator,n=this.expectExpression(e.operand),a=this.getLiteralFromNode(n);return a===t.NO_LIT_FOUND?i.factory.createPrefixUnaryExpression(e.operator,n):(null===(u=s.unaryActions[r])||void 0===u?void 0:u.call(s.unaryActions,a))||n}}if(i.isCallExpression(e)){const t=e.arguments.findIndex((e=>i.isPrefixUnaryExpression(e)&&e.operator===i.SyntaxKind.PlusToken&&i.isArrayLiteralExpression(e.operand)));if(-1!==t){const r=e.arguments[t].operand,{separator:n,function:a,literals:s}=(0,o.getRepetitionParams)(r);if(!n){const r=this.execRepetition(a,s,n,!0),o=[];for(let n=0;n<e.arguments.length;n++)n===t?o.push(...r):o.push(e.arguments[n]);return i.visitNode(i.factory.createCallExpression(e.expression,e.typeArguments,o),this.boundVisitor)}}}}return i.visitEachChild(e,this.boundVisitor,this.context)}return i.visitEachChild(e,this.boundVisitor,this.context)}{if(!e.body)return e;const t=this.checker.getSymbolAtLocation(e.name);if(!t)return e;if(this.macros.has(t))return;const r=t.name,n=[];for(let a=0;a<e.parameters.length;a++){const t=e.parameters[a];if(!i.isIdentifier(t.name))throw new o.MacroError(t,"You cannot use deconstruction patterns in macros.");const r=this.getMarker(t);n.push({spread:Boolean(t.dotDotDotToken),marker:r,start:a,name:t.name.text,node:t,defaultVal:t.initializer||(t.questionToken?i.factory.createIdentifier("undefined"):void 0)})}const s=i.isModuleBlock(e.parent)?e.parent.parent:void 0;for(const[i,o]of this.macros)if(r===o.name&&(null===(a=o.body)||void 0===a?void 0:a.getSourceFile().fileName)===e.getSourceFile().fileName&&o.namespace===s){this.macros.delete(i);break}this.macros.set(t,{name:r,params:n,body:e.body,typeParams:e.typeParameters||[],node:e,namespace:s})}}execRepetition(e,t,r,n){const a=[],o=e.parameters.map((e=>e.name.getText())),s=Array.from({length:o.length},(()=>[]));let l=0;for(let c=0;c<t.length;c++){const e=t[c],r=this.expectExpression(e);i.isArrayLiteralExpression(r)&&(r.elements.length>l&&(l=r.elements.length),s[c%o.length].push(...r.elements))}if(!l)return[i.factory.createNull()];const p=this.repeat.push({index:0,elementSlices:s,repeatNames:o})-1;for(;this.repeat[p].index<l;this.repeat[p].index++)a.push(...this.transformFunction(e,n));return this.repeat.pop(),r&&c[r]?[c[r](this,a)]:a}transformFunction(e,t){if(!e.body)return[];const r=[];if("statements"in e.body)if(t)r.push((0,o.wrapExpressions)(e.body.statements.map((e=>this.maybeStatement(e))).filter((e=>e))));else for(const n of e.body.statements){const e=this.boundVisitor(n);e&&(Array.isArray(e)?r.push(...e):r.push(e))}else{const t=this.expectExpression(e.body);r.push(t)}return r}getMacroParam(e,t,r){const n=t.params.findIndex((t=>t.name===e));if(-1===n){for(let t=this.repeat.length-1;t>=0;t--){const r=this.repeat[t],n=r.repeatNames.indexOf(e);if(-1!==n){const e=r.elementSlices[n];return e.length<=r.index?i.factory.createNull():e[r.index]}}return}const a=t.params[n];if(a.realName)return a.realName;if(a.spread){const e=r.slice(a.start);return 1===e.length&&i.isSpreadElement(e[0])?e[0].expression:i.factory.createArrayLiteralExpression(r.slice(a.start))}return r[a.start]||a.defaultVal}runMacroFromTemplateExpression(e,t){const r=this.macros.get((0,o.resolveAliasedSymbol)(this.checker,this.checker.getSymbolAtLocation(t)));if(!r||!i.isTemplateExpression(e.template))return;const n=[i.factory.createStringLiteral(e.template.head.text)],a=[];for(const o of e.template.templateSpans)a.push(this.expectExpression(o.expression)),n.push(i.factory.createStringLiteral(o.literal.text));return this.execMacro(r,i.factory.createNodeArray([i.factory.createArrayLiteralExpression(n),...a]),e)}runMacroFromCallExpression(e,t,r){var n;const s=e.arguments;let c,l;if(i.isPropertyAccessExpression(t)){const r=(0,o.resolveAliasedSymbol)(this.checker,this.checker.getSymbolAtLocation(t.expression));if(r&&(0,o.hasBit)(r.flags,i.SymbolFlags.Namespace))return this.runMacroFromCallExpression(e,t.name);const n=this.findMacroByTypeParams(t,e);if(!n.length)throw new o.MacroError(e,`No possible candidates for "${t.name.getText()}" call`);if(n.length>1)throw new o.MacroError(e,`More than one possible candidate for "${t.name.getText()}" call`);c=n[0];const a=i.factory.createNodeArray([this.expectExpression(t.expression),...e.arguments]);l=this.macroStack.length?i.factory.createNodeArray(a.map((e=>this.expectExpression(e)))):a}else{const r=a.default[t.getText()];if(r){const t=r.call(r.preserveParams?s:i.factory.createNodeArray(s.map((e=>this.expectExpression(e)))),this,e);return t?Array.isArray(t)?t:i.isStatement(t)?[t]:[i.factory.createExpressionStatement(t)]:[]}c=this.macros.get((0,o.resolveAliasedSymbol)(this.checker,this.checker.getSymbolAtLocation(t))),l=this.macroStack.length?i.factory.createNodeArray(s.map((e=>this.expectExpression(e)))):s}if(!c||!c.body){const i=(0,o.resolveAliasedSymbol)(this.checker,this.checker.getSymbolAtLocation(t));return(null===(n=null===i||void 0===i?void 0:i.declarations)||void 0===n?void 0:n.length)&&!this.boundVisitor(i.declarations[0])?this.runMacroFromCallExpression(e,t,r):void 0}return this.execMacro(c,l,e,r)}execMacro(e,t,r,n){this.macroStack.push({macro:e,args:t,call:r,target:n,defined:new Map,store:new Map});const a=[];for(let c=0;c<e.params.length;c++){const r=e.params[c];if(2===r.marker){const e=r.spread?i.factory.createArrayLiteralExpression(t.slice(r.start)):t[r.start]||r.defaultVal;i.isIdentifier(e)||(r.realName=i.factory.createUniqueName(r.name),a.push(i.factory.createVariableDeclaration(r.realName,void 0,void 0,e)))}}a.length&&this.escapeStatement(i.factory.createVariableStatement(void 0,i.factory.createVariableDeclarationList(a,i.NodeFlags.Let)));const o=i.visitEachChild(e.body,this.boundVisitor,this.context).statements,s=e.params.find((e=>1===e.marker));return s&&(s.defaultVal=i.factory.createNumericLiteral(+s.defaultVal.text+1)),this.macroStack.pop(),[...o]}expandMacroResults(e,t){if(t){const r=this.makeHygienic(e);if(r.length&&i.isReturnStatement(r[r.length-1])&&i.isSourceFile(t)){const e=r.pop();e.expression&&r.push(i.factory.createExpressionStatement(e.expression))}return r}{let t=e.pop();if(0===e.length){if(i.isReturnStatement(t)||i.isExpressionStatement(t))return t.expression;if(!(0,o.isStatement)(t))return t}return i.isExpressionStatement(t)?t=i.factory.createReturnStatement(t.expression):(0,o.isStatement)(t)||(t=i.factory.createReturnStatement(t)),i.factory.createCallExpression(i.factory.createParenthesizedExpression(i.factory.createArrowFunction(void 0,void 0,[],void 0,void 0,i.factory.createBlock([...e,t],!0))),void 0,void 0)}}makeHygienic(e){var t;const r=(null===(t=this.getLastMacro())||void 0===t?void 0:t.defined)||new Map,n=e=>{if(i.isIdentifier(e)){const t=i.factory.createUniqueName(e.text);return r.set(e.text,t),t}return i.isArrayBindingPattern(e)?i.factory.createArrayBindingPattern(e.elements.map((e=>i.isBindingElement(e)?i.factory.createBindingElement(e.dotDotDotToken,e.propertyName,n(e.name),e.initializer?this.expectExpression(e.initializer):void 0):e))):i.isObjectBindingPattern(e)?i.factory.createObjectBindingPattern(e.elements.map((e=>i.factory.createBindingElement(e.dotDotDotToken,e.propertyName,n(e.name),e.initializer?this.expectExpression(e.initializer):void 0)))):e},a=e=>i.isVariableDeclaration(e)&&-1!==e.pos?i.factory.updateVariableDeclaration(e,n(e.name),void 0,void 0,e.initializer?a(this.expectExpression(e.initializer)):void 0):i.isIdentifier(e)?e.parent&&i.isPropertyAccessExpression(e.parent)&&e.parent.expression!==e?e:r.get(e.text)||e:i.visitEachChild(e,a,this.context);return e.map((e=>a(e)))}getMarker(e){if(!e.type)return 0;const t=this.checker.getTypeAtLocation(e.type).getProperty("__marker");if(!t)return 0;const r=this.checker.getTypeOfSymbol(t).getNonNullableType();if(!r.isStringLiteral())return 0;switch(r.value){case"Accumulator":return 1;case"Save":return 2;default:return 0}}callComptimeFunction(e){var r;if(this.comptimeSignatures.size){const n=this.checker.getResolvedSignature(e);if(n&&n.declaration){const i=this.comptimeSignatures.get(n.declaration);i&&(0,o.tryRun)(e,i,(null===(r=e.arguments)||void 0===r?void 0:r.map((e=>{const r=this.getLiteralFromNode(e,!1,!0,!0);return r===t.NO_LIT_FOUND?void 0:r})))||[])}}}getNumberFromNode(e){if(i.isParenthesizedExpression(e))return this.getNumberFromNode(e.expression);if(i.isNumericLiteral(e))return+e.text;const t=this.checker.getTypeAtLocation(e);return t.isNumberLiteral()?t.value:"null"===t.intrinsicName?0:void 0}getStringFromNode(e,t=!1,r=!1){if(!e)return;const n=this.getLiteralFromNode(e,t,r);return"string"===typeof n?n:void 0}getLiteralFromNode(e,r=!1,n=!1,a=!1){if(i.isParenthesizedExpression(e))return this.getLiteralFromNode(e.expression);if(i.isAsExpression(e))return this.getLiteralFromNode(e.expression);if(i.isNumericLiteral(e))return+e.text;if(i.isStringLiteral(e))return e.text;if(e.kind===i.SyntaxKind.FalseKeyword)return!1;if(e.kind===i.SyntaxKind.TrueKeyword)return!0;if(e.kind===i.SyntaxKind.NullKeyword)return null;if(i.isIdentifier(e)){if("undefined"===e.text)return;if(r)return e.text}else{if(n&&i.isTemplateExpression(e)){let t=e.head.text;for(const r of e.templateSpans){t+=(this.getLiteralFromNode(this.expectExpression(r.expression))||"").toString()+r.literal.text}return t}if(a&&i.isObjectLiteralExpression(e)){const t={};for(const s of e.properties){if(!i.isPropertyAssignment(s)||!s.initializer)continue;const e=s.name&&(0,o.getNameFromProperty)(s.name);e&&(t[e]=this.getLiteralFromNode(s.initializer,r,n,a))}return t}if(a&&i.isArrayLiteralExpression(e))return e.elements.map((e=>this.getLiteralFromNode(e,r,n,a)))}const s=this.checker.getTypeAtLocation(e);return s.isNumberLiteral()||s.isStringLiteral()||s.value?s.value:"false"!==s.intrinsicName&&("true"===s.intrinsicName||("undefined"===s.intrinsicName?void 0:"null"===s.intrinsicName?null:t.NO_LIT_FOUND))}getBoolFromNode(e){if(!e)return;if(e.kind===i.SyntaxKind.FalseKeyword||e.kind===i.SyntaxKind.NullKeyword)return!1;if(e.kind===i.SyntaxKind.TrueKeyword)return!0;if(i.isNumericLiteral(e))return"0"!==e.text;if(i.isStringLiteral(e))return""!==e.text;if(i.isArrayLiteralExpression(e)||i.isObjectLiteralElement(e))return!0;if(i.isIdentifier(e)&&"undefined"===e.text)return!1;const t=this.checker.getTypeAtLocation(e);return t.isNumberLiteral()?0!==t.value:t.isStringLiteral()?""!==t.value:!!t.getCallSignatures().length||"false"!==t.intrinsicName&&("true"===t.intrinsicName||"undefined"!==t.intrinsicName&&("null"!==t.intrinsicName&&void 0))}resolveTypeArgumentOfCall(e,t){var r;if(!e.typeArguments||!e.typeArguments[t])return;const n=this.checker.getTypeAtLocation(e.typeArguments[t]),a=this.getLastMacro();if(!a)return n;if(!n.isTypeParameter()){const e=a.macro.typeParams.map((e=>this.checker.getTypeAtLocation(e))),t=(0,o.resolveTypeArguments)(this.checker,a.call);return(0,o.resolveTypeWithTypeParams)(n,e,t)}{const e=a.macro.typeParams.findIndex((e=>this.checker.getTypeAtLocation(e)===n));if(-1===e)return;if(a.call&&i.isCallExpression(a.call)){const t=null===(r=a.call.typeArguments)||void 0===r?void 0:r[e];return t?this.checker.getTypeAtLocation(t):(0,o.resolveTypeArguments)(this.checker,a.call)[e]}}}findMacroByTypeParams(e,t){const r=e.name.getText(),n=this.checker.getTypeAtLocation(e.expression),i=t.arguments.map((e=>this.checker.getTypeAtLocation(e))),a=[];e:for(const[s,c]of this.macros){if(c.name!==r)continue;const e=this.checker.getTypeOfSymbolAtLocation(s,s.valueDeclaration).getCallSignatures()[0],t=c.typeParams.map((e=>this.checker.getTypeAtLocation(e))),l=t.map((e=>e.getConstraint()||this.checker.getAnyType())),p=t.length?e.parameters.map((e=>(0,o.resolveTypeWithTypeParams)(this.checker.getTypeOfSymbolAtLocation(e,e.valueDeclaration),t,l))):e.parameters.map((e=>this.checker.getTypeOfSymbolAtLocation(e,e.valueDeclaration))),u=p.shift();if(this.checker.isTypeAssignableTo(n,u)){for(let e=0;e<p.length&&!c.params[e+1].spread;e++){if(!i[e]){if(p[e].getDefault()||p[e]!==p[e].getNonNullableType())continue;continue e}if(!this.checker.isTypeAssignableTo(i[e],p[e]))continue e}if(i.length>p.length){let e=this.checker.getTypeArguments(p[p.length-1])[0];if(e.isTypeParameter()&&(e=e.getConstraint()||this.checker.getAnyType()),!c.params[c.params.length-1].spread)continue;for(let t=p.length-1;t<i.length;t++)if(!this.checker.isTypeAssignableTo(i[t],e))continue e}a.push(c)}}return a}findMacroByName(e,t){const r=[];for(const[,n]of this.macros)n.name===t&&r.push(n);if(r.length>1)throw new o.MacroError(e,`More than one macro with the name ${t} exists.`);return r[0]}getLastMacro(){return this.macroStack[this.macroStack.length-1]}saveAndClearEscapedStatements(e){e.push(...this.escapedStatements[this.escapedStatements.length-1]),this.escapedStatements[this.escapedStatements.length-1].length=0}escapeStatement(...e){this.escapedStatements[this.escapedStatements.length-1].push(...e)}removeEscapeScope(){this.escapedStatements.pop()}addEscapeScope(){this.escapedStatements.push([])}addComptimeSignature(e,t,r){if(this.comptimeSignatures.has(e))return this.comptimeSignatures.get(e);const n=new Function(...r,t);return this.comptimeSignatures.set(e,n),n}strToAST(e){const t=i.createSourceFile("",e,i.ScriptTarget.ESNext,!0,i.ScriptKind.TSX),r=e=>i.factory.cloneNode(i.visitEachChild(e,r,this.context));return i.visitEachChild(t,r,this.context).statements}};const c={"[]":(e,t)=>i.factory.createArrayLiteralExpression(t.map((e=>i.isExpressionStatement(e)?e.expression:e))),"+":(e,t)=>(0,o.toBinaryExp)(e,t,i.SyntaxKind.PlusToken),"-":(e,t)=>(0,o.toBinaryExp)(e,t,i.SyntaxKind.MinusToken),"*":(e,t)=>(0,o.toBinaryExp)(e,t,i.SyntaxKind.AsteriskToken),"||":(e,t)=>(0,o.toBinaryExp)(e,t,i.SyntaxKind.BarBarToken),"&&":(e,t)=>(0,o.toBinaryExp)(e,t,i.SyntaxKind.AmpersandAmpersandToken),"()":(e,t)=>i.factory.createParenthesizedExpression((0,o.toBinaryExp)(e,t,i.SyntaxKind.CommaToken)),".":(e,t)=>{let r=t[0];for(let n=1;n<t.length;n++){const e=t[n];r=i.isIdentifier(e)?i.factory.createPropertyAccessExpression(r,e):i.factory.createElementAccessExpression(r,e)}return r},"{}":(e,t)=>i.factory.createObjectLiteralExpression(t.filter((e=>i.isArrayLiteralExpression(e))).map((t=>{const r=t;if(r.elements.length<2)return i.factory.createPropertyAssignment("undefined",i.factory.createIdentifier("undefined"));const n=e.getStringFromNode(r.elements[0],!1,!0);return n?i.factory.createPropertyAssignment(n,r.elements[1]):i.factory.createPropertyAssignment("undefined",i.factory.createIdentifier("undefined"))})))}},7427:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateChainingTypings=void 0;const n=r(4625),i=r(7914),a=r(3931);function o(e,t){return(0,i.hasBit)(t.flags,n.TypeFlags.String)?"String":(0,i.hasBit)(t.flags,n.TypeFlags.Number)?"Number":(0,i.hasBit)(t.flags,n.TypeFlags.Boolean)?"Boolean":e.isArrayType(t)||e.isTupleType(t)?"Array":void 0}function s(e,t,r){e.has(t)?e.get(t).push(r):e.set(t,[r])}t.generateChainingTypings=function(e,t){var r,i,c;const l=new Map;for(const[,o]of t){const t=null===(r=o.params[0])||void 0===r?void 0:r.node;if(!t)continue;const i=e.getTypeAtLocation(t);if(!i)continue;const c=n.factory.createMethodSignature([],o.name,o.node.questionToken,o.node.typeParameters,o.node.parameters.slice(1),o.node.type||a.UNKNOWN_TOKEN);if(i.isUnion())for(const e of i.types)s(l,e,c);else s(l,i,c)}const p=[];for(const[a,s]of l){const t=o(e,a);t&&p.push(n.factory.createInterfaceDeclaration(void 0,t,null===(c=null===(i=a.target)||void 0===i?void 0:i.typeParameters)||void 0===c?void 0:c.map((e=>n.factory.createTypeReferenceNode(n.factory.createIdentifier(e.symbol.name),void 0))),void 0,s))}return[n.factory.createModuleDeclaration([n.factory.createToken(n.SyntaxKind.DeclareKeyword)],n.factory.createIdentifier("global"),n.factory.createModuleBlock(p),n.NodeFlags.ExportContext|n.NodeFlags.GlobalAugmentation|n.NodeFlags.Ambient|n.NodeFlags.ContextFlags)]}},3931:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformDeclaration=t.UNKNOWN_TOKEN=void 0;const n=r(4625);t.UNKNOWN_TOKEN=n.factory.createKeywordTypeNode(n.SyntaxKind.UnknownKeyword),t.transformDeclaration=function(e,r){if(n.isInterfaceDeclaration(r)||n.isTypeAliasDeclaration(r)||n.isEnumDeclaration(r))return r;if(n.isClassDeclaration(r))return n.factory.createClassDeclaration([...r.modifiers||[],n.factory.createToken(n.SyntaxKind.DeclareKeyword)],r.name,r.typeParameters,r.heritageClauses,r.members.map((e=>n.isMethodDeclaration(e)?n.factory.createMethodDeclaration(e.modifiers,e.asteriskToken,e.name,e.questionToken,e.typeParameters,e.parameters,e.type||t.UNKNOWN_TOKEN,void 0):n.isPropertyDeclaration(e)?n.factory.createPropertyDeclaration(e.modifiers,e.name,e.questionToken||e.exclamationToken,e.type||t.UNKNOWN_TOKEN,void 0):n.isGetAccessorDeclaration(e)?n.factory.createGetAccessorDeclaration(e.modifiers,e.name,e.parameters,e.type||t.UNKNOWN_TOKEN,void 0):n.isSetAccessorDeclaration(e)?n.factory.createSetAccessorDeclaration(e.modifiers,e.name,e.parameters,void 0):n.isConstructorDeclaration(e)?n.factory.createConstructorDeclaration(e.modifiers,e.parameters,void 0):e)));if(n.isExpressionStatement(r)&&n.isClassExpression(r.expression))return n.factory.createClassDeclaration([...r.expression.modifiers||[],n.factory.createToken(n.SyntaxKind.DeclareKeyword)],r.expression.name,r.expression.typeParameters,r.expression.heritageClauses,r.expression.members.map((e=>n.isMethodDeclaration(e)?n.factory.createMethodDeclaration(e.modifiers,e.asteriskToken,e.name,e.questionToken,e.typeParameters,e.parameters,e.type||t.UNKNOWN_TOKEN,void 0):n.isPropertyDeclaration(e)?n.factory.createPropertyDeclaration(e.modifiers,e.name,e.questionToken||e.exclamationToken,e.type||t.UNKNOWN_TOKEN,void 0):n.isGetAccessorDeclaration(e)?n.factory.createGetAccessorDeclaration(e.modifiers,e.name,e.parameters,e.type||t.UNKNOWN_TOKEN,void 0):n.isSetAccessorDeclaration(e)?n.factory.createSetAccessorDeclaration(e.modifiers,e.name,e.parameters,void 0):n.isConstructorDeclaration(e)?n.factory.createConstructorDeclaration(e.modifiers,e.parameters,void 0):e)));if(n.isVariableStatement(r)){const t=[];for(const i of r.declarationList.declarations){let r;if(i.initializer){const t=e.getTypeAtLocation(i.initializer),n=e.typeToTypeNode(t,void 0,void 0);n&&(r=n)}t.push(n.factory.createVariableDeclaration(i.name,i.exclamationToken,r))}return n.factory.createVariableStatement([...r.modifiers||[],n.factory.createToken(n.SyntaxKind.DeclareKeyword)],t)}return n.isFunctionDeclaration(r)?n.factory.createFunctionDeclaration([...r.modifiers||[],n.factory.createToken(n.SyntaxKind.DeclareKeyword)],r.asteriskToken,r.name,r.typeParameters,r.parameters,r.type||t.UNKNOWN_TOKEN,void 0):void 0}},6369:function(e,t,r){"use strict";var n=r(818);t.QM=void 0;const i=r(4625),a=r(249),o=r(3349),s=r(3931),c=r(7914),l=r(7427);function p(e,t,r){let n="";for(const a of t)n+=e.printNode(i.EmitHint.Unspecified,a,r);return n}t.QM=function(e,t){const r=[];for(const i of t.statements)if(-1===i.pos){const t=(0,s.transformDeclaration)(e,i);t&&r.push(t)}const n=i.createPrinter();return{typeNodes:r,chainTypes:(0,l.generateChainingTypings)(e,o.macros),print:e=>p(n,e,t)}}},7914:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expressionToStringLiteral=t.normalizeFunctionNode=t.deExpandMacroResults=t.resolveTypeArguments=t.resolveTypeWithTypeParams=t.macroParamsToArray=t.tryRun=t.fnBodyToString=t.resolveAliasedSymbol=t.primitiveToNode=t.createObject=t.isStatement=t.getNameFromProperty=t.MacroError=t.getRepetitionParams=t.toBinaryExp=t.wrapExpressions=t.hasBit=t.flattenBody=void 0;const n=r(4625);function i(e){return"statements"in e?[...e.statements]:[n.factory.createExpressionStatement(e)]}t.flattenBody=i,t.hasBit=function(e,t){return 0!==(e&t)},t.wrapExpressions=function(e){let t=e.pop();return t?0===e.length&&n.isReturnStatement(t)?t.expression||n.factory.createIdentifier("undefined"):(n.isExpressionStatement(t)?t=n.factory.createReturnStatement(t.expression):t.kind>n.SyntaxKind.EmptyStatement&&t.kind<n.SyntaxKind.DebuggerStatement||(t=n.factory.createReturnStatement(t)),n.factory.createImmediatelyInvokedArrowFunction([...e,t])):n.factory.createNull()},t.toBinaryExp=function(e,t,r){let i;for(const a of t.map((e=>n.isExpressionStatement(e)?e.expression:e)))i=i?e.context.factory.createBinaryExpression(i,r,a):a;return n.visitNode(i,e.boundVisitor)},t.getRepetitionParams=function(e){const t={literals:[]},r=e.elements[0];n.isStringLiteral(r)?t.separator=r.text:n.isArrayLiteralExpression(r)?t.literals.push(...r.elements):n.isArrowFunction(r)&&(t.function=r);const i=e.elements[1];i&&(n.isArrayLiteralExpression(i)?t.literals.push(...i.elements):n.isArrowFunction(i)&&(t.function=i));const o=e.elements[2];if(o&&n.isArrowFunction(o)&&(t.function=o),!t.function)throw new a(e,"Repetition must include arrow function.");return t};class a extends Error{constructor(e,t){const r=e.pos,i=e.end-e.pos;super(n.formatDiagnosticsWithColorAndContext([{category:n.DiagnosticCategory.Error,code:8e3,file:e.getSourceFile(),start:r,length:i,messageText:t}],{getNewLine:()=>"\r\n",getCurrentDirectory:()=>"unknown directory",getCanonicalFileName:e=>e})),this.start=r,this.length=i,this.rawMsg=t}}function o(e){return e.kind>=n.SyntaxKind.Block&&e.kind<=n.SyntaxKind.MissingDeclaration}t.MacroError=a,t.getNameFromProperty=function(e){return n.isIdentifier(e)||n.isStringLiteral(e)||n.isPrivateIdentifier(e)||n.isNumericLiteral(e)?e.text:void 0},t.isStatement=o,t.createObject=function(e){const t=[];for(const r in e){const i=e[r];t.push(n.factory.createPropertyAssignment(r,i?o(i)?n.factory.createArrowFunction(void 0,void 0,[],void 0,void 0,n.isBlock(i)?i:n.factory.createBlock([i])):i:n.factory.createIdentifier("undefined")))}return n.factory.createObjectLiteralExpression(t)},t.primitiveToNode=function e(t){if("string"===typeof t)return n.factory.createStringLiteral(t);if("number"===typeof t)return n.factory.createNumericLiteral(t);if("boolean"===typeof t)return t?n.factory.createTrue():n.factory.createFalse();if(null===t)return n.factory.createNull();if(Array.isArray(t))return n.factory.createArrayLiteralExpression(t.map((t=>e(t))));{const r=[];for(const i in t)r.push(n.factory.createPropertyAssignment(n.factory.createStringLiteral(i),e(t[i])));return n.factory.createObjectLiteralExpression(r)}},t.resolveAliasedSymbol=function(e,t){if(t){for(;0!==(t.flags&n.SymbolFlags.Alias);){const r=e.getAliasedSymbol(t);if("unknown"===r.name)return t;t=r}return t}},t.fnBodyToString=function e(t,r){if(!r.body)return"";const i=new Set;let a="";const o=s=>{if(n.isCallExpression(s)){const c=t.getResolvedSignature(s);if(c&&c.declaration&&c.declaration!==r&&c.declaration.parent.parent!==r&&(n.isFunctionDeclaration(c.declaration)||n.isArrowFunction(c.declaration)||n.isFunctionExpression(c.declaration))){const r=c.declaration.name?c.declaration.name.text:n.isIdentifier(s.expression)?s.expression.text:void 0;if(!r||i.has(r))return;i.add(r),a+=`function ${r}(${c.parameters.map((e=>e.name)).join(",")}){${e(t,c.declaration)}}`}n.forEachChild(s,o)}else n.forEachChild(s,o)};return n.forEachChild(r.body,o),a+n.transpile((r.body.original||r.body).getText())},t.tryRun=function(e,t,r=[],n){try{return t(...r)}catch(i){throw i instanceof Error?new a(e,(n||"")+i.message):i}},t.macroParamsToArray=function(e,t){const r=[];for(let n=0;n<e.length;n++)e[n].spread?r.push(t.slice(n)):!t[n]&&e[n].defaultVal?r.push(e[n].defaultVal):r.push(t[n]);return r},t.resolveTypeWithTypeParams=function e(t,r,n){const i=t.checker;if("indexType"in t&&"objectType"in t){const a=e(t.indexType,r,n),o=e(t.objectType,r,n),s=a.isTypeParameter()?n[r.findIndex((e=>e===a))]:a;if(!s||!s.isLiteral())return t;const c=o.getProperty(s.value.toString());return c?i.getTypeOfSymbol(c):t}if("checkType"in t&&"extendsType"in t&&"resolvedTrueType"in t&&"resolvedFalseType"in t){const a=e(t.checkType,r,n),o=e(t.extendsType,r,n),s=e(t.resolvedTrueType,r,n),c=e(t.resolvedFalseType,r,n);return i.isTypeAssignableTo(a,o)?s:c}if(t.isIntersection()){const a=new Map;for(const i of t.types){const t=e(i,r,n);for(const e of t.getProperties())a.set(e.name,e)}return i.createAnonymousType(void 0,a,[],[],[])}if(t.isTypeParameter())return n[r.findIndex((e=>e===t))]||t;if(t.resolvedTypeArguments){const i=Object.assign({},t);return i.resolvedTypeArguments=t.resolvedTypeArguments.map((t=>e(t,r,n))),i}if(t.getCallSignatures().length){const a=Object.assign({},t),o=t.getCallSignatures()[0],s=Object.assign({},o);return s.resolvedReturnType=e(o.getReturnType(),r,n),s.parameters=s.parameters.map((t=>{if(!t.valueDeclaration||!t.valueDeclaration.type)return t;const a=i.createSymbol(t.flags,t.escapedName);return a.type=e(i.getTypeAtLocation(t.valueDeclaration.type),r,n),a})),a.callSignatures=[s],a}return t},t.resolveTypeArguments=function(e,t){var r;const i=e.getResolvedSignature(t);if(!i||!i.mapper)return[];switch(i.mapper.kind){case n.TypeMapKind.Simple:return[i.mapper.target];case n.TypeMapKind.Array:return(null===(r=i.mapper.targets)||void 0===r?void 0:r.filter((e=>e)))||[];default:return[]}},t.deExpandMacroResults=function(e){const t=[...e],r=t[e.length-1];if(!r)return[e];if(n.isReturnStatement(r)){const r=t.pop().expression;if(!r)return[e];if(n.isCallExpression(r)&&n.isParenthesizedExpression(r.expression)&&n.isArrowFunction(r.expression.expression)){const e=i(r.expression.expression.body);let a=e.pop();return a&&n.isReturnStatement(a)&&a.expression&&(a=a.expression),[[...t,...e],a]}return[t,r]}return[t,t[t.length-1]]},t.normalizeFunctionNode=function(e,t){var r;if(n.isArrowFunction(t)||n.isFunctionExpression(t)||n.isFunctionDeclaration(t))return t;const i=e.getSymbolAtLocation(t);if(i&&(null===(r=i.declarations)||void 0===r?void 0:r.length)){const e=i.declarations[0];if(n.isFunctionLikeDeclaration(e))return e;if(n.isVariableDeclaration(e)&&e.initializer&&n.isFunctionLikeDeclaration(e.initializer))return e.initializer}},t.expressionToStringLiteral=function e(t){return n.isParenthesizedExpression(t)?e(t.expression):n.isStringLiteral(t)?t:n.isIdentifier(t)||n.isNumericLiteral(t)?n.factory.createStringLiteral(t.text):t.kind===n.SyntaxKind.TrueKeyword?n.factory.createStringLiteral("true"):t.kind===n.SyntaxKind.FalseKeyword?n.factory.createStringLiteral("false"):n.factory.createStringLiteral("null")}},1819:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=1819,e.exports=t},3841:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=3841,e.exports=t},5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(2412)}])},1682:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{e:function(){return Runnable}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react_split_pane__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5884),_css_App_module_css__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8836),_css_App_module_css__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_css_App_module_css__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7294),_monaco_editor_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9604);function Runnable(props){var ref=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(),evalRes=ref[0],setEvalRes=ref[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_split_pane__WEBPACK_IMPORTED_MODULE_1__.Z,{split:"horizontal",defaultSize:"75%",primary:"first",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{style:{width:"100%"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_monaco_editor_react__WEBPACK_IMPORTED_MODULE_3__.ZP,{height:"80vh",language:"javascript",theme:"vs-dark",value:props.code,options:{readOnly:!0}}),";"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_css_App_module_css__WEBPACK_IMPORTED_MODULE_4___default().runSection,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:_css_App_module_css__WEBPACK_IMPORTED_MODULE_4___default().button,onClick:function(){try{setEvalRes(eval(props.code))}catch(err){setEvalRes(err.toString())}},children:"Run"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("br",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:_css_App_module_css__WEBPACK_IMPORTED_MODULE_4___default().runSectionResult,children:evalRes})]})]})}},2412:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A}});var n=r(5893),i=r(5423),a=r.n(i),o=r(3349),s=r(6369),c=r(249);var l='\ndeclare function $$loadEnv(path?: string) : void;\ndeclare function $$readFile(path: string, parseJSON?: false) : string;\ndeclare function $$inline<F extends (...args: any) => any>(func: F, params: Parameters<F>, doNotCall: any) : () => ReturnType<F>;\ndeclare function $$inline<F extends (...args: any) => any>(func: F, params: Parameters<F>) : ReturnType<F>;\ndeclare function $$kindof(ast: unknown) : number;\ndeclare function $$define(varname: string, initializer: unknown, let?: boolean, exportDecl?: boolean) : void;\ndeclare function $$i() : number;\ndeclare function $$length(arr: Array<any>|string) : number;\ndeclare function $$ident(str: string) : any;\ndeclare function $$err(str: string) : void;\ndeclare function $$includes<T>(arr: Array<T>, val: T) : boolean;\ndeclare function $$includes(arr: string, val: string) : boolean;\ndeclare function $$slice<T>(str: Array<T>, start?: number, end?: number) : Array<T>;\ndeclare function $$slice(str: string, start?: number, end?: number) : string;\ndeclare function $$ts<T = unknown>(code: string) : T;\ndeclare function $$escape<T>(code: () => T) : T;\ndeclare function $$typeToString<T>(simplify?: boolean, nonNull?: boolean, fullExpand?: boolean) : string;\ndeclare function $$propsOfType<T>() : Array<string>;\ndeclare function $$typeAssignableTo<T, K>() : boolean;\ndeclare function $$comptime(fn: () => void) : void;\ninterface RawContext {\n    ts: any,\n    factory: any,\n    transformer: any,\n    checker: any,\n    thisMacro: any\n}\ndeclare function $$raw<T>(fn: (ctx: RawContext, ...args: any[]) => ts.Node | ts.Node[] | undefined) : T;\ndeclare function $$text(exp: any) : string;\ndeclare function $$decompose(exp: any) : any[];\ndeclare function $$map<T>(exp: T, mapper: (value: any, parent: number) => any) : T;\ntype Accumulator = number & { __marker?: "Accumulator" };\ntype Save<T> = T & { __marker?: "Save" };\ntype EmptyDecorator = (...props: any) => void;\nconst enum LabelKinds {\n    If,\n    ForIter,\n    For,\n    While,\n    Block\n}\ninterface IfLabel {\n    kind: LabelKinds.If\n    condition: any,\n    then: any,\n    else: any\n}\ninterface ForIterLabel {\n    kind: LabelKinds.ForIter,\n    type: "in" | "of",\n    initializer: any,\n    iterator: any,\n    statement: any\n}\ninterface ForLabel {\n    kind: LabelKinds.For,\n    initializer: {\n        expression?: any,\n        variables?: Array<[variableName: string, initializer: any]>\n    },\n    condition: any,\n    increment: any,\n    statement: any\n}\ninterface WhileLabel {\n    kind: LabelKinds.While,\n    do: boolean,\n    condition: any,\n    statement: any\n}\ninterface BlockLabel {\n    kind: LabelKinds.Block,\n    statement: any\n}\ntype Label = IfLabel | ForIterLabel | ForLabel | WhileLabel | BlockLabel;\n';for(var p in l+="const enum SyntaxKind {\n",Object.keys(a().SyntaxKind))a().SyntaxKind[p]&&(l+="".concat(a().SyntaxKind[p]," = ").concat(p,",\n"));l+="\n}\n";var u=a().createSourceFile("markers.d.ts",l,a().ScriptTarget.ES2022,!0,a().ScriptKind.TS),f={noImplicitAny:!0,strictNullChecks:!0,target:a().ScriptTarget.ESNext,experimentalDecorators:!0,lib:["ES5"]};function d(e){o.macros.clear();var t,r,n,i,l=a().createSourceFile("module.ts",e,f.target||a().ScriptTarget.ESNext,!0),p=[],d={getSourceFile:function(e){return"module.ts"===e?l:u},getDefaultLibFileName:function(){return"lib.d.ts"},useCaseSensitiveFileNames:function(){return!1},getCanonicalFileName:function(e){return e},writeFile:function(){},getCurrentDirectory:function(){return""},getNewLine:function(){return"\n"},fileExists:function(){return!0},readFile:function(){return""},directoryExists:function(){return!0},getDirectories:function(){return[]}},m=a().createProgram(["module.ts"],f,d);try{m.emit(void 0,(function(e,t){return r=t}),void 0,void 0,{before:[function(e){var r=new c.MacroTransformer(e,m.getTypeChecker(),o.macros);return function(e){var n=r.run(e);return t=(0,s.QM)(m.getTypeChecker(),n),n}}]})}catch(y){n=y,(null!=(i=o.MacroError)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i)&&p.push(y)}return{transpiledSourceCode:r,generatedTypes:{fromMacros:t.print(t.typeNodes),chainTypes:t.print(t.chainTypes)},errors:p}}var m=r(7294),y=r(9604);function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){var t=(0,y.Ik)(),r=(0,m.useState)(),i=r[0],a=r[1],o=(0,m.useState)(),s=o[0],c=o[1],p=(0,m.useState)(),u=p[0],d=p[1],x="ts:ts-macros/generated_types.d.ts",g="ts:ts-macros/chain_types.d.ts";return(0,m.useEffect)((function(){var r,n;if(t){t.languages.typescript.javascriptDefaults.setCompilerOptions(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){h(e,t,r[t])}))}return e}({},f)),t.languages.typescript.typescriptDefaults.setDiagnosticsOptions({diagnosticCodesToIgnore:[1219]});var i="ts:ts-macros/markers.d.ts";t.languages.typescript.javascriptDefaults.addExtraLib(l,i),t.editor.createModel(l,"typescript",t.Uri.parse(i));var a=(null===(r=e.libCode)||void 0===r?void 0:r.fromMacros)||"";t.languages.typescript.javascriptDefaults.addExtraLib(a,x),c(t.editor.createModel(a,"typescript",t.Uri.parse(x)));var o="export {};\n\n".concat((null===(n=e.libCode)||void 0===n?void 0:n.chainTypes)||"");t.languages.typescript.javascriptDefaults.addExtraLib(o,g),d(t.editor.createModel(o,"typescript",t.Uri.parse(g)))}}),[t]),(0,m.useEffect)((function(){var r,n;t&&(null===s||void 0===s||s.setValue((null===(r=e.libCode)||void 0===r?void 0:r.fromMacros)||""),null===u||void 0===u||u.setValue("export {};\n\n".concat((null===(n=e.libCode)||void 0===n?void 0:n.chainTypes)||"")))}),[e.libCode]),(0,m.useEffect)((function(){if(t&&i){var r=i.getModel();r&&t.editor.setModelMarkers(r,"_",e.errors.map((function(e){var t=r.getPositionAt(e.start),n=r.getPositionAt(e.start+e.length);return{message:e.rawMsg,severity:8,startColumn:t.column,startLineNumber:t.lineNumber,endColumn:n.column,endLineNumber:n.lineNumber}})))}}),[e.errors]),(0,n.jsx)(y.ZP,{height:"calc(90vh - 50px)",language:"typescript",theme:"vs-dark",value:e.code,onChange:e.onChange,onMount:function(e){return a(e)}})}var g=r(1682),E=r(5884),v=r(6961),S=r(8836),T=r.n(S),_=['function $contains<T>(value: T, possible: Array<T>) {\n    return +["||", [possible], (val: T) => value === val];\n}\n    \nconst searchItem = "google";\n$contains!(searchItem, ["erwin", "tj"]);',"function $try(resultObj: Save<{ value?: number, is_err: () => boolean}>) {\n    $$escape!(() => {\n        if (resultObj.is_err()) {\n            return resultObj;\n        }\n    });\n    return resultObj.value;\n}\n\n\nconst a = $try!({ value: 123, is_err: () => false });",'type ClassInfo = { name: string, value: string };\n\nfunction $makeClasses(...info: Array<ClassInfo>) {\n    +[[info], (classInfo: ClassInfo) => {\n        $$ts!(`\n            class ${classInfo.name} {\n                constructor() {\n                    this.value = ${classInfo.value}\n                }\n            }\n        `);\n    }];\n}\n\n$makeClasses!({name: "A", value: "123"}, {name: "B", value: "345"});','function $map<T, R>(arr: Save<Array<T>>, cb: (item: T) => R) : Array<R> {\n    $$escape!(() => {\n        const res = [];\n        for (let i=0; i < arr.length; i++) {\n        res.push($$inline!(cb, [arr[i]]));\n        }\n    });\n    return $$ident!("res");\n}\n\nconst result = $map!([1, 2, 3, 4, 5, 6, 7, 8, 9], (num) => num * 2);',"function $ToInterval(info: WhileLabel, intervalTimer = 1000) {\n    const interval = setInterval(() => {\n        if (info.condition) {\n            $$inline!(info.statement, []);\n        } else {\n            clearInterval(interval);\n        }\n    }, intervalTimer);\n}\n\nconst arr = [1, 3, 4, 5, 6];\n\n$ToInterval:\nwhile (arr.length !== 0) {\n    console.log(arr.pop());\n}",'\nfunction $renameClass(newName: string) : EmptyDecorator {\n    return $$raw!((ctx, newNameNode) => {\n       const target = ctx.thisMacro.target;\n       return ctx.factory.createClassDeclaration(\n            target.modifiers?.filter(m => m.kind !== ctx.ts.SyntaxKind.Decorator),\n            ctx.factory.createIdentifier(newNameNode.text),\n            target.typeParameters,\n            target.heritageClauses,\n            target.members\n        )\n    });\n}\n\n@$renameClass!("NewTest")\nclass Test {\n    propA: number\n    propB: string\n    constructor(a: number, b: string) {\n        this.propA = a;\n        this.propB = b;\n    }\n}\n'],b="\n// Interactive playground!\n// Write your code here and see the transpiled result.\n// All types and functions from the library are already imported!\n\n".concat(_[Math.floor(Math.random()*_.length)],"\n");function N(){var e=(0,m.useState)(),t=e[0],r=e[1],i=(0,m.useState)([]),a=i[0],o=i[1],s=(0,m.useState)(),c=s[0],l=s[1],p=(0,m.useState)(),u=p[0],f=p[1],y=function(e){r(e);var t=d(e),n=t.generatedTypes,i=t.errors,a=t.transpiledSourceCode;f(a),l(n),o(i)};return(0,m.useEffect)((function(){var e=Object.fromEntries(new URLSearchParams(window.location.search).entries());if(e.code){var t=(0,v.decompressFromEncodedURIComponent)(e.code);if(!t)return;y(t)}else y(b)}),[]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("header",{className:T().header,children:[(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("h2",{children:"Typescript Macros"}),(0,n.jsx)("button",{className:T().button,onClick:function(){t&&navigator.permissions.query({name:"clipboard-write"}).then((function(e){"granted"!=e.state&&"prompt"!=e.state||navigator.clipboard.writeText(location.origin+location.pathname+"?code=".concat((0,v.compressToEncodedURIComponent)(t)))}))},children:"Copy Link"})]}),(0,n.jsx)("a",{href:"https://github.com/GoogleFeud/ts-macros",style:{fontSize:"24px"},children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",fill:"currentColor",viewBox:"0 0 16 16",children:(0,n.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})})]}),(0,n.jsxs)(E.Z,{split:"vertical",defaultSize:"50%",primary:"first",children:[(0,n.jsx)(x,{code:t,libCode:c,errors:a,onChange:function(e){y(e||"")}}),(0,n.jsx)(g.e,{code:u||""})]}),(0,n.jsx)("footer",{className:T().footer,children:(0,n.jsxs)("p",{children:["Made with \u2764\ufe0f by ",(0,n.jsx)("a",{href:"https://github.com/GoogleFeud",children:"GoogleFeud"}),"."]})})]})}function A(){return(0,n.jsx)(N,{})}},8836:function(e){e.exports={header:"App_header__3xFa8",footer:"App_footer__qJi0F",button:"App_button__Z9okP",runSection:"App_runSection__ptbmi",runSectionResult:"App_runSectionResult__ZpuvE"}},3411:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=3411,e.exports=t},818:function(){},9939:function(){},175:function(){},4250:function(){},7424:function(){},9107:function(){},444:function(){},6170:function(){},1157:function(){},1638:function(){},9528:function(){},1206:function(){},2183:function(){},3024:function(){},2715:function(){},3611:function(){},8353:function(){},1210:function(){},5573:function(){},3454:function(){}},function(e){e.O(0,[138,21,961,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);